                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler 
                                      3 ; Version 4.3.2 #14228 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module SpriteManager
                                      6 	.optsdcc -msm83
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _SetBank
                                     12 	.globl _memset
                                     13 	.globl _PopBank
                                     14 	.globl _PushBank
                                     15 	.globl _RefreshScroll
                                     16 	.globl _DrawSprite
                                     17 	.globl _InitSprite
                                     18 	.globl _ClearOAMs
                                     19 	.globl _SwapOAMs
                                     20 	.globl _VectorRemovePos
                                     21 	.globl _VectorAdd
                                     22 	.globl _set_sprite_data
                                     23 	.globl _THIS
                                     24 	.globl _THIS_IDX
                                     25 	.globl _last_sprite_pal_loaded
                                     26 	.globl _last_sprite_loaded
                                     27 	.globl _sprite_manager_updatables
                                     28 	.globl _sprite_manager_sprites_pool
                                     29 	.globl _cachedSprite
                                     30 	.globl _sprite_manager_removal_check
                                     31 	.globl _sprite_manager_sprites_poolSTACK
                                     32 	.globl _sprite_manager_sprites
                                     33 	.globl _sprite_manager_sprites_mem
                                     34 	.globl _SpriteManagerReset
                                     35 	.globl _SpriteManagerLoad
                                     36 	.globl _SpriteManagerAdd
                                     37 	.globl _SpriteManagerRemove
                                     38 	.globl _SpriteManagerRemoveSprite
                                     39 	.globl _SpriteManagerFlushRemove
                                     40 	.globl _SpriteManagerUpdate
                                     41 ;--------------------------------------------------------
                                     42 ; special function registers
                                     43 ;--------------------------------------------------------
                                     44 ;--------------------------------------------------------
                                     45 ; ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area _DATA
      000000                         48 _sprite_manager_sprites_mem::
      000000                         49 	.ds 700
      0002BC                         50 _sprite_manager_sprites::
      0002BC                         51 	.ds 40
      0002E4                         52 _sprite_manager_sprites_poolSTACK::
      0002E4                         53 	.ds 20
      0002F8                         54 _sprite_manager_removal_check::
      0002F8                         55 	.ds 1
      0002F9                         56 _cachedSprite::
      0002F9                         57 	.ds 2
                                     58 ;--------------------------------------------------------
                                     59 ; ram data
                                     60 ;--------------------------------------------------------
                                     61 	.area _INITIALIZED
      000000                         62 _sprite_manager_sprites_pool::
      000000                         63 	.ds 2
      000002                         64 _sprite_manager_updatables::
      000002                         65 	.ds 21
      000017                         66 _last_sprite_loaded::
      000017                         67 	.ds 2
      000019                         68 _last_sprite_pal_loaded::
      000019                         69 	.ds 1
      00001A                         70 _THIS_IDX::
      00001A                         71 	.ds 1
      00001B                         72 _THIS::
      00001B                         73 	.ds 2
                                     74 ;--------------------------------------------------------
                                     75 ; absolute external ram data
                                     76 ;--------------------------------------------------------
                                     77 	.area _DABS (ABS)
                                     78 ;--------------------------------------------------------
                                     79 ; global & static initialisations
                                     80 ;--------------------------------------------------------
                                     81 	.area _HOME
                                     82 	.area _GSINIT
                                     83 	.area _GSFINAL
                                     84 	.area _GSINIT
                                     85 ;--------------------------------------------------------
                                     86 ; Home
                                     87 ;--------------------------------------------------------
                                     88 	.area _HOME
                                     89 	.area _HOME
                                     90 ;--------------------------------------------------------
                                     91 ; code
                                     92 ;--------------------------------------------------------
                                     93 	.area _CODE
                                     94 ;C:/gbdk/ZGB/common/src/SpriteManager.c:22: void SpriteManagerReset() {
                                     95 ;	---------------------------------
                                     96 ; Function SpriteManagerReset
                                     97 ; ---------------------------------
      000000                         98 _SpriteManagerReset::
      000000 E8 FD            [16]   99 	add	sp, #-3
                                    100 ;C:/gbdk/ZGB/common/src/SpriteManager.c:25: last_sprite_loaded = 128;
      000002 21r17r00         [12]  101 	ld	hl, #_last_sprite_loaded
      000005 3E 80            [ 8]  102 	ld	a, #0x80
      000007 22               [ 8]  103 	ld	(hl+), a
      000008 AF               [ 4]  104 	xor	a, a
      000009 77               [ 8]  105 	ld	(hl), a
                                    106 ;C:/gbdk/ZGB/common/src/SpriteManager.c:26: last_sprite_pal_loaded = 0;
      00000A 21r19r00         [12]  107 	ld	hl, #_last_sprite_pal_loaded
                                    108 ;C:/gbdk/ZGB/common/src/SpriteManager.c:29: for(i = 0u; i != sprite_manager_updatables[0]; ++ i) {
      00000D 36 00            [12]  109 	ld	(hl), #0x00
      00000F 4E               [ 8]  110 	ld	c, (hl)
      000010                        111 00104$:
      000010 21r02r00         [12]  112 	ld	hl, #_sprite_manager_updatables
      000013 46               [ 8]  113 	ld	b, (hl)
      000014 79               [ 4]  114 	ld	a, c
      000015 90               [ 4]  115 	sub	a, b
      000016 28 57            [12]  116 	jr	Z, 00101$
                                    117 ;C:/gbdk/ZGB/common/src/SpriteManager.c:30: THIS = sprite_manager_sprites[sprite_manager_updatables[i + 1]];
      000018 79               [ 4]  118 	ld	a, c
      000019 3C               [ 4]  119 	inc	a
      00001A 5F               [ 4]  120 	ld	e, a
      00001B 07               [ 4]  121 	rlca
      00001C 9F               [ 4]  122 	sbc	a, a
      00001D 57               [ 4]  123 	ld	d, a
      00001E 21r02r00         [12]  124 	ld	hl, #_sprite_manager_updatables
      000021 19               [ 8]  125 	add	hl, de
      000022 6E               [ 8]  126 	ld	l, (hl)
                                    127 ;	spillPairReg hl
      000023 26 00            [ 8]  128 	ld	h, #0x00
                                    129 ;	spillPairReg hl
                                    130 ;	spillPairReg hl
      000025 29               [ 8]  131 	add	hl, hl
      000026 11rBCr02         [12]  132 	ld	de, #_sprite_manager_sprites
      000029 19               [ 8]  133 	add	hl, de
      00002A 5D               [ 4]  134 	ld	e, l
      00002B 54               [ 4]  135 	ld	d, h
      00002C 1A               [ 8]  136 	ld	a, (de)
      00002D 21r1Br00         [12]  137 	ld	hl, #_THIS
      000030 22               [ 8]  138 	ld	(hl+), a
      000031 13               [ 8]  139 	inc	de
      000032 1A               [ 8]  140 	ld	a, (de)
      000033 77               [ 8]  141 	ld	(hl), a
                                    142 ;C:/gbdk/ZGB/common/src/SpriteManager.c:31: PUSH_BANK(spriteBanks[THIS->type]);
      000034 21r1Br00         [12]  143 	ld	hl, #_THIS
      000037 2A               [ 8]  144 	ld	a, (hl+)
      000038 5F               [ 4]  145 	ld	e, a
      000039 56               [ 8]  146 	ld	d, (hl)
      00003A 21 13 00         [12]  147 	ld	hl, #0x0013
      00003D 19               [ 8]  148 	add	hl, de
      00003E 5E               [ 8]  149 	ld	e, (hl)
      00003F 21r00r00         [12]  150 	ld	hl, #_spriteBanks
      000042 16 00            [ 8]  151 	ld	d, #0x00
      000044 19               [ 8]  152 	add	hl, de
      000045 7E               [ 8]  153 	ld	a, (hl)
      000046 C5               [16]  154 	push	bc
      000047 F5               [16]  155 	push	af
      000048 33               [ 8]  156 	inc	sp
      000049 CDr00r00         [24]  157 	call	_PushBank
      00004C 33               [ 8]  158 	inc	sp
      00004D C1               [12]  159 	pop	bc
                                    160 ;C:/gbdk/ZGB/common/src/SpriteManager.c:32: spriteDestroyFuncs[THIS->type]();
      00004E 21r1Br00         [12]  161 	ld	hl, #_THIS
      000051 2A               [ 8]  162 	ld	a, (hl+)
      000052 5F               [ 4]  163 	ld	e, a
      000053 56               [ 8]  164 	ld	d, (hl)
      000054 21 13 00         [12]  165 	ld	hl, #0x0013
      000057 19               [ 8]  166 	add	hl, de
      000058 6E               [ 8]  167 	ld	l, (hl)
                                    168 ;	spillPairReg hl
      000059 26 00            [ 8]  169 	ld	h, #0x00
                                    170 ;	spillPairReg hl
                                    171 ;	spillPairReg hl
      00005B 29               [ 8]  172 	add	hl, hl
      00005C 11r00r00         [12]  173 	ld	de, #_spriteDestroyFuncs
      00005F 19               [ 8]  174 	add	hl, de
      000060 2A               [ 8]  175 	ld	a, (hl+)
      000061 47               [ 4]  176 	ld	b, a
      000062 66               [ 8]  177 	ld	h, (hl)
                                    178 ;	spillPairReg hl
      000063 C5               [16]  179 	push	bc
      000064 68               [ 4]  180 	ld	l, b
                                    181 ;	spillPairReg hl
                                    182 ;	spillPairReg hl
      000065 CDr00r00         [24]  183 	call	___sdcc_call_hl
      000068 CDr00r00         [24]  184 	call	_PopBank
      00006B C1               [12]  185 	pop	bc
                                    186 ;C:/gbdk/ZGB/common/src/SpriteManager.c:29: for(i = 0u; i != sprite_manager_updatables[0]; ++ i) {
      00006C 0C               [ 4]  187 	inc	c
      00006D 18 A1            [12]  188 	jr	00104$
      00006F                        189 00101$:
                                    190 ;C:/gbdk/ZGB/common/src/SpriteManager.c:37: StackClear(sprite_manager_sprites_pool);
      00006F 21r00r00         [12]  191 	ld	hl, #_sprite_manager_sprites_pool
      000072 36rE3            [12]  192 	ld	(hl), #<((_sprite_manager_sprites_poolSTACK - 1))
      000074 23               [ 8]  193 	inc	hl
      000075 36s02            [12]  194 	ld	(hl), #>((_sprite_manager_sprites_poolSTACK - 1))
                                    195 ;C:/gbdk/ZGB/common/src/SpriteManager.c:38: for(i = 0; i != N_SPRITE_MANAGER_SPRITES; ++i) {
      000077 F8 02            [12]  196 	ldhl	sp,	#2
      000079 36 00            [12]  197 	ld	(hl), #0x00
      00007B                        198 00106$:
                                    199 ;C:/gbdk/ZGB/common/src/SpriteManager.c:39: sprite_manager_sprites[i] = (Sprite*)&sprite_manager_sprites_mem[sizeof(Sprite) * (UINT16)i];
      00007B F8 02            [12]  200 	ldhl	sp,	#2
      00007D 7E               [ 8]  201 	ld	a, (hl)
      00007E 16 00            [ 8]  202 	ld	d, #0x00
      000080 87               [ 4]  203 	add	a, a
      000081 CB 12            [ 8]  204 	rl	d
      000083 5F               [ 4]  205 	ld	e, a
      000084 21rBCr02         [12]  206 	ld	hl, #_sprite_manager_sprites
      000087 19               [ 8]  207 	add	hl, de
      000088 33               [ 8]  208 	inc	sp
      000089 33               [ 8]  209 	inc	sp
      00008A E5               [16]  210 	push	hl
      00008B F8 02            [12]  211 	ldhl	sp,	#2
      00008D 4E               [ 8]  212 	ld	c, (hl)
      00008E 06 00            [ 8]  213 	ld	b, #0x00
      000090 69               [ 4]  214 	ld	l, c
      000091 60               [ 4]  215 	ld	h, b
      000092 29               [ 8]  216 	add	hl, hl
      000093 29               [ 8]  217 	add	hl, hl
      000094 29               [ 8]  218 	add	hl, hl
      000095 29               [ 8]  219 	add	hl, hl
      000096 09               [ 8]  220 	add	hl, bc
      000097 29               [ 8]  221 	add	hl, hl
      000098 09               [ 8]  222 	add	hl, bc
      000099 11r00r00         [12]  223 	ld	de, #_sprite_manager_sprites_mem
      00009C 19               [ 8]  224 	add	hl, de
      00009D 4D               [ 4]  225 	ld	c, l
      00009E 44               [ 4]  226 	ld	b, h
      00009F E1               [12]  227 	pop	hl
      0000A0 E5               [16]  228 	push	hl
      0000A1 79               [ 4]  229 	ld	a, c
      0000A2 22               [ 8]  230 	ld	(hl+), a
      0000A3 70               [ 8]  231 	ld	(hl), b
                                    232 ;C:/gbdk/ZGB/common/src/SpriteManager.c:40: StackPush(sprite_manager_sprites_pool, i);		
      0000A4 21r00r00         [12]  233 	ld	hl, #_sprite_manager_sprites_pool
      0000A7 34               [12]  234 	inc	(hl)
      0000A8 20 02            [12]  235 	jr	NZ, 00142$
      0000AA 23               [ 8]  236 	inc	hl
      0000AB 34               [12]  237 	inc	(hl)
      0000AC                        238 00142$:
      0000AC 21r00r00         [12]  239 	ld	hl, #_sprite_manager_sprites_pool
      0000AF 2A               [ 8]  240 	ld	a, (hl+)
      0000B0 4F               [ 4]  241 	ld	c, a
      0000B1 46               [ 8]  242 	ld	b, (hl)
      0000B2 F8 02            [12]  243 	ldhl	sp,	#2
      0000B4 7E               [ 8]  244 	ld	a, (hl)
      0000B5 02               [ 8]  245 	ld	(bc), a
                                    246 ;C:/gbdk/ZGB/common/src/SpriteManager.c:38: for(i = 0; i != N_SPRITE_MANAGER_SPRITES; ++i) {
      0000B6 34               [12]  247 	inc	(hl)
      0000B7 7E               [ 8]  248 	ld	a, (hl)
      0000B8 D6 14            [ 8]  249 	sub	a, #0x14
      0000BA 20 BF            [12]  250 	jr	NZ, 00106$
                                    251 ;C:/gbdk/ZGB/common/src/SpriteManager.c:42: ClearOAMs();
      0000BC CDr00r00         [24]  252 	call	_ClearOAMs
                                    253 ;C:/gbdk/ZGB/common/src/SpriteManager.c:44: memset(spriteIdxs, 128, N_SPRITE_TYPES);
      0000BF 11 01 00         [12]  254 	ld	de, #0x0001
      0000C2 D5               [16]  255 	push	de
      0000C3 AF               [ 4]  256 	xor	a, a
      0000C4 F5               [16]  257 	push	af
      0000C5 11r00r00         [12]  258 	ld	de, #_spriteIdxs
      0000C8 D5               [16]  259 	push	de
      0000C9 CDr00r00         [24]  260 	call	_memset
      0000CC E8 06            [16]  261 	add	sp, #6
                                    262 ;C:/gbdk/ZGB/common/src/SpriteManager.c:47: sprite_manager_updatables[0] = 0;
      0000CE 21r02r00         [12]  263 	ld	hl, #_sprite_manager_updatables
      0000D1 36 00            [12]  264 	ld	(hl), #0x00
                                    265 ;C:/gbdk/ZGB/common/src/SpriteManager.c:48: sprite_manager_removal_check = 0;
      0000D3 21rF8r02         [12]  266 	ld	hl, #_sprite_manager_removal_check
      0000D6 36 00            [12]  267 	ld	(hl), #0x00
                                    268 ;C:/gbdk/ZGB/common/src/SpriteManager.c:49: }
      0000D8 E8 03            [16]  269 	add	sp, #3
      0000DA C9               [16]  270 	ret
                                    271 ;C:/gbdk/ZGB/common/src/SpriteManager.c:52: void SpriteManagerLoad(UINT8 sprite_type) {
                                    272 ;	---------------------------------
                                    273 ; Function SpriteManagerLoad
                                    274 ; ---------------------------------
      0000DB                        275 _SpriteManagerLoad::
      0000DB E8 F4            [16]  276 	add	sp, #-12
      0000DD F8 0B            [12]  277 	ldhl	sp,	#11
      0000DF 77               [ 8]  278 	ld	(hl), a
                                    279 ;C:/gbdk/ZGB/common/src/SpriteManager.c:56: if(spriteIdxs[sprite_type] != 128 || last_sprite_loaded < -127) //Already loaded or no room for this sprite
      0000E0 01r00r00         [12]  280 	ld	bc, #_spriteIdxs+0
      0000E3 6E               [ 8]  281 	ld	l, (hl)
      0000E4 26 00            [ 8]  282 	ld	h, #0x00
      0000E6 09               [ 8]  283 	add	hl, bc
      0000E7 4D               [ 4]  284 	ld	c, l
      0000E8 44               [ 4]  285 	ld	b, h
      0000E9 0A               [ 8]  286 	ld	a, (bc)
      0000EA D6 80            [ 8]  287 	sub	a, #0x80
      0000EC C2r06r02         [16]  288 	jp	NZ,00107$
      0000EF 21r17r00         [12]  289 	ld	hl, #_last_sprite_loaded
      0000F2 2A               [ 8]  290 	ld	a, (hl+)
      0000F3 D6 81            [ 8]  291 	sub	a, #0x81
      0000F5 7E               [ 8]  292 	ld	a, (hl)
      0000F6 DE FF            [ 8]  293 	sbc	a, #0xff
      0000F8 56               [ 8]  294 	ld	d, (hl)
      0000F9 3E FF            [ 8]  295 	ld	a, #0xff
      0000FB CB 7F            [ 8]  296 	bit	7,a
      0000FD 28 07            [12]  297 	jr	Z, 00125$
      0000FF CB 7A            [ 8]  298 	bit	7, d
      000101 20 08            [12]  299 	jr	NZ, 00126$
      000103 BF               [ 4]  300 	cp	a, a
      000104 18 05            [12]  301 	jr	00126$
      000106                        302 00125$:
      000106 CB 7A            [ 8]  303 	bit	7, d
      000108 28 01            [12]  304 	jr	Z, 00126$
      00010A 37               [ 4]  305 	scf
      00010B                        306 00126$:
                                    307 ;C:/gbdk/ZGB/common/src/SpriteManager.c:57: return;
      00010B DAr06r02         [16]  308 	jp	C,00107$
                                    309 ;C:/gbdk/ZGB/common/src/SpriteManager.c:59: PUSH_BANK(spriteDataBanks[sprite_type])
      00010E 11r00r00         [12]  310 	ld	de, #_spriteDataBanks+0
      000111 F8 0B            [12]  311 	ldhl	sp,	#11
      000113 6E               [ 8]  312 	ld	l, (hl)
      000114 26 00            [ 8]  313 	ld	h, #0x00
      000116 19               [ 8]  314 	add	hl, de
      000117 5D               [ 4]  315 	ld	e, l
      000118 54               [ 4]  316 	ld	d, h
      000119 1A               [ 8]  317 	ld	a, (de)
      00011A C5               [16]  318 	push	bc
      00011B F5               [16]  319 	push	af
      00011C 33               [ 8]  320 	inc	sp
      00011D CDr00r00         [24]  321 	call	_PushBank
      000120 33               [ 8]  322 	inc	sp
      000121 C1               [12]  323 	pop	bc
                                    324 ;C:/gbdk/ZGB/common/src/SpriteManager.c:61: const struct MetaSpriteInfo* data = spriteDatas[sprite_type];
      000122 F8 0B            [12]  325 	ldhl	sp,	#11
      000124 6E               [ 8]  326 	ld	l, (hl)
      000125 26 00            [ 8]  327 	ld	h, #0x00
      000127 29               [ 8]  328 	add	hl, hl
      000128 11r00r00         [12]  329 	ld	de, #_spriteDatas
      00012B 19               [ 8]  330 	add	hl, de
      00012C 5D               [ 4]  331 	ld	e, l
      00012D 54               [ 4]  332 	ld	d, h
      00012E 1A               [ 8]  333 	ld	a, (de)
      00012F F8 09            [12]  334 	ldhl	sp,	#9
      000131 22               [ 8]  335 	ld	(hl+), a
      000132 13               [ 8]  336 	inc	de
      000133 1A               [ 8]  337 	ld	a, (de)
      000134 77               [ 8]  338 	ld	(hl), a
                                    339 ;C:/gbdk/ZGB/common/src/SpriteManager.c:62: UINT8 n_tiles = data->num_tiles;
      000135 F8 09            [12]  340 	ldhl	sp,	#9
      000137 2A               [ 8]  341 	ld	a, (hl+)
      000138 5F               [ 4]  342 	ld	e, a
      000139 56               [ 8]  343 	ld	d, (hl)
      00013A 13               [ 8]  344 	inc	de
      00013B 13               [ 8]  345 	inc	de
      00013C 1A               [ 8]  346 	ld	a, (de)
      00013D F8 00            [12]  347 	ldhl	sp,	#0
      00013F 77               [ 8]  348 	ld	(hl), a
                                    349 ;C:/gbdk/ZGB/common/src/SpriteManager.c:65: last_sprite_loaded -= n_tiles;
      000140 2A               [ 8]  350 	ld	a, (hl+)
      000141 22               [ 8]  351 	ld	(hl+), a
      000142 36 00            [12]  352 	ld	(hl), #0x00
      000144 21r17r00         [12]  353 	ld	hl, #_last_sprite_loaded
      000147 2A               [ 8]  354 	ld	a, (hl+)
      000148 5F               [ 4]  355 	ld	e, a
      000149 56               [ 8]  356 	ld	d, (hl)
      00014A F8 01            [12]  357 	ldhl	sp,	#1
      00014C 2A               [ 8]  358 	ld	a,	(hl+)
      00014D 66               [ 8]  359 	ld	h, (hl)
      00014E 6F               [ 4]  360 	ld	l, a
      00014F 7B               [ 4]  361 	ld	a, e
      000150 95               [ 4]  362 	sub	a, l
      000151 5F               [ 4]  363 	ld	e, a
      000152 7A               [ 4]  364 	ld	a, d
      000153 9C               [ 4]  365 	sbc	a, h
      000154 21r18r00         [12]  366 	ld	hl, #_last_sprite_loaded + 1
      000157 32               [ 8]  367 	ld	(hl-), a
      000158 73               [ 8]  368 	ld	(hl), e
                                    369 ;C:/gbdk/ZGB/common/src/SpriteManager.c:66: spriteIdxs[sprite_type] = last_sprite_loaded;
      000159 7E               [ 8]  370 	ld	a, (hl)
      00015A 02               [ 8]  371 	ld	(bc), a
                                    372 ;C:/gbdk/ZGB/common/src/SpriteManager.c:67: UINT8 end = last_sprite_loaded + n_tiles;
      00015B 7E               [ 8]  373 	ld	a, (hl)
      00015C F8 00            [12]  374 	ldhl	sp,	#0
      00015E 4E               [ 8]  375 	ld	c, (hl)
      00015F 81               [ 4]  376 	add	a, c
      000160 F8 03            [12]  377 	ldhl	sp,	#3
      000162 77               [ 8]  378 	ld	(hl), a
                                    379 ;C:/gbdk/ZGB/common/src/SpriteManager.c:68: if((end - 1u) >= (UINT8)last_sprite_loaded) {
      000163 2A               [ 8]  380 	ld	a, (hl+)
      000164 23               [ 8]  381 	inc	hl
      000165 4F               [ 4]  382 	ld	c, a
      000166 06 00            [ 8]  383 	ld	b, #0x00
      000168 11 01 00         [12]  384 	ld	de, #0x0001
      00016B 79               [ 4]  385 	ld	a, c
      00016C 93               [ 4]  386 	sub	a, e
      00016D 5F               [ 4]  387 	ld	e, a
      00016E 78               [ 4]  388 	ld	a, b
      00016F 9A               [ 4]  389 	sbc	a, d
      000170 32               [ 8]  390 	ld	(hl-), a
      000171 73               [ 8]  391 	ld	(hl), e
      000172 FAr17r00         [16]  392 	ld	a, (#_last_sprite_loaded)
      000175 F8 06            [12]  393 	ldhl	sp,	#6
      000177 77               [ 8]  394 	ld	(hl), a
      000178 2A               [ 8]  395 	ld	a, (hl+)
      000179 22               [ 8]  396 	ld	(hl+), a
                                    397 ;C:/gbdk/ZGB/common/src/SpriteManager.c:69: set_sprite_data(last_sprite_loaded, n_tiles, data->data);
      00017A AF               [ 4]  398 	xor	a, a
      00017B 22               [ 8]  399 	ld	(hl+), a
      00017C 2A               [ 8]  400 	ld	a, (hl+)
      00017D 4F               [ 4]  401 	ld	c, a
                                    402 ;C:/gbdk/ZGB/common/src/SpriteManager.c:71: set_sprite_data(last_sprite_loaded, n_tiles - end, data->data);
      00017E 3A               [ 8]  403 	ld	a, (hl-)
      00017F 47               [ 4]  404 	ld	b, a
      000180 03               [ 8]  405 	inc	bc
      000181 03               [ 8]  406 	inc	bc
      000182 03               [ 8]  407 	inc	bc
      000183 59               [ 4]  408 	ld	e, c
      000184 50               [ 4]  409 	ld	d, b
      000185 1A               [ 8]  410 	ld	a, (de)
      000186 22               [ 8]  411 	ld	(hl+), a
      000187 13               [ 8]  412 	inc	de
      000188 1A               [ 8]  413 	ld	a, (de)
      000189 77               [ 8]  414 	ld	(hl), a
                                    415 ;C:/gbdk/ZGB/common/src/SpriteManager.c:68: if((end - 1u) >= (UINT8)last_sprite_loaded) {
      00018A F8 04            [12]  416 	ldhl	sp,	#4
      00018C 5D               [ 4]  417 	ld	e, l
      00018D 54               [ 4]  418 	ld	d, h
      00018E F8 07            [12]  419 	ldhl	sp,	#7
      000190 1A               [ 8]  420 	ld	a, (de)
      000191 13               [ 8]  421 	inc	de
      000192 96               [ 8]  422 	sub	a, (hl)
      000193 23               [ 8]  423 	inc	hl
      000194 1A               [ 8]  424 	ld	a, (de)
      000195 9E               [ 8]  425 	sbc	a, (hl)
      000196 38 17            [12]  426 	jr	C, 00105$
                                    427 ;C:/gbdk/ZGB/common/src/SpriteManager.c:69: set_sprite_data(last_sprite_loaded, n_tiles, data->data);
      000198 F8 09            [12]  428 	ldhl	sp,	#9
      00019A 2A               [ 8]  429 	ld	a, (hl+)
      00019B 5F               [ 4]  430 	ld	e, a
      00019C 56               [ 8]  431 	ld	d, (hl)
      00019D D5               [16]  432 	push	de
      00019E F8 02            [12]  433 	ldhl	sp,	#2
      0001A0 7E               [ 8]  434 	ld	a, (hl)
      0001A1 F5               [16]  435 	push	af
      0001A2 33               [ 8]  436 	inc	sp
      0001A3 F8 09            [12]  437 	ldhl	sp,	#9
      0001A5 7E               [ 8]  438 	ld	a, (hl)
      0001A6 F5               [16]  439 	push	af
      0001A7 33               [ 8]  440 	inc	sp
      0001A8 CDr00r00         [24]  441 	call	_set_sprite_data
      0001AB E8 04            [16]  442 	add	sp, #4
      0001AD 18 54            [12]  443 	jr	00106$
      0001AF                        444 00105$:
                                    445 ;C:/gbdk/ZGB/common/src/SpriteManager.c:71: set_sprite_data(last_sprite_loaded, n_tiles - end, data->data);
      0001AF F8 00            [12]  446 	ldhl	sp,	#0
      0001B1 7E               [ 8]  447 	ld	a, (hl)
      0001B2 F8 03            [12]  448 	ldhl	sp,	#3
      0001B4 96               [ 8]  449 	sub	a, (hl)
      0001B5 F8 09            [12]  450 	ldhl	sp,	#9
      0001B7 5E               [ 8]  451 	ld	e, (hl)
      0001B8 23               [ 8]  452 	inc	hl
      0001B9 56               [ 8]  453 	ld	d, (hl)
      0001BA D5               [16]  454 	push	de
      0001BB F5               [16]  455 	push	af
      0001BC 33               [ 8]  456 	inc	sp
      0001BD F8 09            [12]  457 	ldhl	sp,	#9
      0001BF 7E               [ 8]  458 	ld	a, (hl)
      0001C0 F5               [16]  459 	push	af
      0001C1 33               [ 8]  460 	inc	sp
      0001C2 CDr00r00         [24]  461 	call	_set_sprite_data
      0001C5 E8 04            [16]  462 	add	sp, #4
                                    463 ;C:/gbdk/ZGB/common/src/SpriteManager.c:72: set_sprite_data(0, end, data->data + ((n_tiles - end) << 4));
      0001C7 59               [ 4]  464 	ld	e, c
      0001C8 50               [ 4]  465 	ld	d, b
      0001C9 1A               [ 8]  466 	ld	a, (de)
      0001CA F8 09            [12]  467 	ldhl	sp,	#9
      0001CC 22               [ 8]  468 	ld	(hl+), a
      0001CD 13               [ 8]  469 	inc	de
      0001CE 1A               [ 8]  470 	ld	a, (de)
      0001CF 77               [ 8]  471 	ld	(hl), a
      0001D0 F8 03            [12]  472 	ldhl	sp,	#3
      0001D2 3A               [ 8]  473 	ld	a, (hl-)
      0001D3 2B               [ 8]  474 	dec	hl
      0001D4 4F               [ 4]  475 	ld	c, a
      0001D5 06 00            [ 8]  476 	ld	b, #0x00
      0001D7 2A               [ 8]  477 	ld	a, (hl+)
      0001D8 5F               [ 4]  478 	ld	e, a
      0001D9 56               [ 8]  479 	ld	d, (hl)
      0001DA 7B               [ 4]  480 	ld	a, e
      0001DB 91               [ 4]  481 	sub	a, c
      0001DC 5F               [ 4]  482 	ld	e, a
      0001DD 7A               [ 4]  483 	ld	a, d
      0001DE 98               [ 4]  484 	sbc	a, b
      0001DF 47               [ 4]  485 	ld	b, a
      0001E0 4B               [ 4]  486 	ld	c, e
      0001E1 CB 21            [ 8]  487 	sla	c
      0001E3 CB 10            [ 8]  488 	rl	b
      0001E5 CB 21            [ 8]  489 	sla	c
      0001E7 CB 10            [ 8]  490 	rl	b
      0001E9 CB 21            [ 8]  491 	sla	c
      0001EB CB 10            [ 8]  492 	rl	b
      0001ED CB 21            [ 8]  493 	sla	c
      0001EF CB 10            [ 8]  494 	rl	b
      0001F1 F8 09            [12]  495 	ldhl	sp,	#9
      0001F3 2A               [ 8]  496 	ld	a,	(hl+)
      0001F4 66               [ 8]  497 	ld	h, (hl)
      0001F5 6F               [ 4]  498 	ld	l, a
      0001F6 09               [ 8]  499 	add	hl, bc
      0001F7 E5               [16]  500 	push	hl
      0001F8 F8 05            [12]  501 	ldhl	sp,	#5
      0001FA 66               [ 8]  502 	ld	h, (hl)
      0001FB 2E 00            [ 8]  503 	ld	l, #0x00
      0001FD E5               [16]  504 	push	hl
      0001FE CDr00r00         [24]  505 	call	_set_sprite_data
      000201 E8 04            [16]  506 	add	sp, #4
      000203                        507 00106$:
                                    508 ;C:/gbdk/ZGB/common/src/SpriteManager.c:91: POP_BANK
      000203 CDr00r00         [24]  509 	call	_PopBank
      000206                        510 00107$:
                                    511 ;C:/gbdk/ZGB/common/src/SpriteManager.c:92: }
      000206 E8 0C            [16]  512 	add	sp, #12
      000208 C9               [16]  513 	ret
                                    514 ;C:/gbdk/ZGB/common/src/SpriteManager.c:95: Sprite* SpriteManagerAdd(UINT8 sprite_type, UINT16 x, UINT16 y) {
                                    515 ;	---------------------------------
                                    516 ; Function SpriteManagerAdd
                                    517 ; ---------------------------------
      000209                        518 _SpriteManagerAdd::
      000209 E8 F5            [16]  519 	add	sp, #-11
      00020B F8 0A            [12]  520 	ldhl	sp,	#10
      00020D 32               [ 8]  521 	ld	(hl-), a
      00020E 2B               [ 8]  522 	dec	hl
      00020F 7B               [ 4]  523 	ld	a, e
      000210 22               [ 8]  524 	ld	(hl+), a
                                    525 ;C:/gbdk/ZGB/common/src/SpriteManager.c:100: SpriteManagerLoad(sprite_type);
      000211 7A               [ 4]  526 	ld	a, d
      000212 22               [ 8]  527 	ld	(hl+), a
      000213 7E               [ 8]  528 	ld	a, (hl)
      000214 CDrDBr00         [24]  529 	call	_SpriteManagerLoad
                                    530 ;C:/gbdk/ZGB/common/src/SpriteManager.c:102: sprite_idx = StackPop(sprite_manager_sprites_pool);
      000217 21r00r00         [12]  531 	ld	hl, #_sprite_manager_sprites_pool
      00021A 2A               [ 8]  532 	ld	a, (hl+)
      00021B 4F               [ 4]  533 	ld	c, a
      00021C 46               [ 8]  534 	ld	b, (hl)
      00021D 0A               [ 8]  535 	ld	a, (bc)
      00021E F8 07            [12]  536 	ldhl	sp,	#7
      000220 77               [ 8]  537 	ld	(hl), a
      000221 21r00r00         [12]  538 	ld	hl, #_sprite_manager_sprites_pool
      000224 2A               [ 8]  539 	ld	a, (hl+)
      000225 5F               [ 4]  540 	ld	e, a
      000226 3A               [ 8]  541 	ld	a, (hl-)
      000227 57               [ 4]  542 	ld	d, a
      000228 1B               [ 8]  543 	dec	de
      000229 7B               [ 4]  544 	ld	a, e
      00022A 22               [ 8]  545 	ld	(hl+), a
      00022B 72               [ 8]  546 	ld	(hl), d
                                    547 ;C:/gbdk/ZGB/common/src/SpriteManager.c:103: sprite = sprite_manager_sprites[sprite_idx];
      00022C 01rBCr02         [12]  548 	ld	bc, #_sprite_manager_sprites+0
      00022F F8 07            [12]  549 	ldhl	sp,	#7
      000231 5E               [ 8]  550 	ld	e, (hl)
      000232 16 00            [ 8]  551 	ld	d, #0x00
      000234 6B               [ 4]  552 	ld	l, e
      000235 62               [ 4]  553 	ld	h, d
      000236 29               [ 8]  554 	add	hl, hl
      000237 09               [ 8]  555 	add	hl, bc
      000238 2A               [ 8]  556 	ld	a, (hl+)
      000239 4F               [ 4]  557 	ld	c, a
      00023A 46               [ 8]  558 	ld	b, (hl)
                                    559 ;C:/gbdk/ZGB/common/src/SpriteManager.c:104: sprite->type = sprite_type;
      00023B 21 13 00         [12]  560 	ld	hl, #0x0013
      00023E 09               [ 8]  561 	add	hl, bc
      00023F 33               [ 8]  562 	inc	sp
      000240 33               [ 8]  563 	inc	sp
      000241 5D               [ 4]  564 	ld	e, l
      000242 54               [ 4]  565 	ld	d, h
      000243 D5               [16]  566 	push	de
      000244 F8 0A            [12]  567 	ldhl	sp,	#10
      000246 7E               [ 8]  568 	ld	a, (hl)
      000247 12               [ 8]  569 	ld	(de), a
                                    570 ;C:/gbdk/ZGB/common/src/SpriteManager.c:105: sprite->marked_for_removal = 0;
      000248 21 14 00         [12]  571 	ld	hl, #0x0014
      00024B 09               [ 8]  572 	add	hl, bc
      00024C 36 00            [12]  573 	ld	(hl), #0x00
                                    574 ;C:/gbdk/ZGB/common/src/SpriteManager.c:106: sprite->lim_x = 32u;
      00024E 21 15 00         [12]  575 	ld	hl, #0x0015
      000251 09               [ 8]  576 	add	hl, bc
      000252 3E 20            [ 8]  577 	ld	a, #0x20
      000254 22               [ 8]  578 	ld	(hl+), a
      000255 36 00            [12]  579 	ld	(hl), #0x00
                                    580 ;C:/gbdk/ZGB/common/src/SpriteManager.c:107: sprite->lim_y = 32u;
      000257 21 17 00         [12]  581 	ld	hl, #0x0017
      00025A 09               [ 8]  582 	add	hl, bc
      00025B 3E 20            [ 8]  583 	ld	a, #0x20
      00025D 22               [ 8]  584 	ld	(hl+), a
      00025E 36 00            [12]  585 	ld	(hl), #0x00
                                    586 ;C:/gbdk/ZGB/common/src/SpriteManager.c:108: sprite->mirror = NO_MIRROR;
      000260 21 10 00         [12]  587 	ld	hl, #0x0010
      000263 09               [ 8]  588 	add	hl, bc
      000264 36 00            [12]  589 	ld	(hl), #0x00
                                    590 ;C:/gbdk/ZGB/common/src/SpriteManager.c:110: VectorAdd(sprite_manager_updatables, sprite_idx);
      000266 C5               [16]  591 	push	bc
      000267 F8 09            [12]  592 	ldhl	sp,	#9
      000269 7E               [ 8]  593 	ld	a, (hl)
      00026A 11r02r00         [12]  594 	ld	de, #_sprite_manager_updatables
      00026D CDr00r00         [24]  595 	call	_VectorAdd
      000270 C1               [12]  596 	pop	bc
                                    597 ;C:/gbdk/ZGB/common/src/SpriteManager.c:112: InitSprite(sprite, sprite_type);
      000271 C5               [16]  598 	push	bc
      000272 F8 0C            [12]  599 	ldhl	sp,	#12
      000274 7E               [ 8]  600 	ld	a, (hl)
      000275 59               [ 4]  601 	ld	e, c
      000276 50               [ 4]  602 	ld	d, b
      000277 CDr00r00         [24]  603 	call	_InitSprite
      00027A C1               [12]  604 	pop	bc
                                    605 ;C:/gbdk/ZGB/common/src/SpriteManager.c:113: sprite->x = x;
      00027B 21 0C 00         [12]  606 	ld	hl, #0x000c
      00027E 09               [ 8]  607 	add	hl, bc
      00027F 5D               [ 4]  608 	ld	e, l
      000280 54               [ 4]  609 	ld	d, h
      000281 F8 08            [12]  610 	ldhl	sp,	#8
      000283 2A               [ 8]  611 	ld	a, (hl+)
      000284 12               [ 8]  612 	ld	(de), a
      000285 13               [ 8]  613 	inc	de
      000286 7E               [ 8]  614 	ld	a, (hl)
      000287 12               [ 8]  615 	ld	(de), a
                                    616 ;C:/gbdk/ZGB/common/src/SpriteManager.c:114: sprite->y = y;
      000288 21 0E 00         [12]  617 	ld	hl, #0x000e
      00028B 09               [ 8]  618 	add	hl, bc
      00028C 5D               [ 4]  619 	ld	e, l
      00028D 54               [ 4]  620 	ld	d, h
      00028E F8 0D            [12]  621 	ldhl	sp,	#13
      000290 2A               [ 8]  622 	ld	a, (hl+)
      000291 12               [ 8]  623 	ld	(de), a
      000292 13               [ 8]  624 	inc	de
      000293 7E               [ 8]  625 	ld	a, (hl)
      000294 12               [ 8]  626 	ld	(de), a
                                    627 ;C:/gbdk/ZGB/common/src/SpriteManager.c:115: sprite->unique_id = SPRITE_UNIQUE_ID(x >> 3, (y + sprite->coll_h - 1) >> 3);
      000295 21 19 00         [12]  628 	ld	hl, #0x0019
      000298 09               [ 8]  629 	add	hl, bc
      000299 E5               [16]  630 	push	hl
      00029A 7D               [ 4]  631 	ld	a, l
      00029B F8 04            [12]  632 	ldhl	sp,	#4
      00029D 77               [ 8]  633 	ld	(hl), a
      00029E E1               [12]  634 	pop	hl
      00029F 7C               [ 4]  635 	ld	a, h
      0002A0 F8 03            [12]  636 	ldhl	sp,	#3
      0002A2 77               [ 8]  637 	ld	(hl), a
      0002A3 F8 08            [12]  638 	ldhl	sp,#8
      0002A5 2A               [ 8]  639 	ld	a, (hl+)
      0002A6 5F               [ 4]  640 	ld	e, a
      0002A7 56               [ 8]  641 	ld	d, (hl)
      0002A8 CB 3A            [ 8]  642 	srl	d
      0002AA CB 1B            [ 8]  643 	rr	e
      0002AC CB 3A            [ 8]  644 	srl	d
      0002AE CB 1B            [ 8]  645 	rr	e
      0002B0 CB 3A            [ 8]  646 	srl	d
      0002B2 CB 1B            [ 8]  647 	rr	e
      0002B4 F8 04            [12]  648 	ldhl	sp,	#4
      0002B6 7B               [ 4]  649 	ld	a, e
      0002B7 22               [ 8]  650 	ld	(hl+), a
      0002B8 36 00            [12]  651 	ld	(hl), #0x00
      0002BA 21 12 00         [12]  652 	ld	hl, #0x0012
      0002BD 09               [ 8]  653 	add	hl, bc
      0002BE 5E               [ 8]  654 	ld	e, (hl)
      0002BF 16 00            [ 8]  655 	ld	d, #0x00
      0002C1 F8 0D            [12]  656 	ldhl	sp,	#13
      0002C3 2A               [ 8]  657 	ld	a,	(hl+)
      0002C4 66               [ 8]  658 	ld	h, (hl)
      0002C5 6F               [ 4]  659 	ld	l, a
      0002C6 19               [ 8]  660 	add	hl, de
      0002C7 5D               [ 4]  661 	ld	e, l
      0002C8 54               [ 4]  662 	ld	d, h
      0002C9 1B               [ 8]  663 	dec	de
      0002CA CB 3A            [ 8]  664 	srl	d
      0002CC CB 1B            [ 8]  665 	rr	e
      0002CE CB 3A            [ 8]  666 	srl	d
      0002D0 CB 1B            [ 8]  667 	rr	e
      0002D2 CB 3A            [ 8]  668 	srl	d
      0002D4 CB 1B            [ 8]  669 	rr	e
      0002D6 F8 04            [12]  670 	ldhl	sp,	#4
      0002D8 2A               [ 8]  671 	ld	a, (hl+)
      0002D9 23               [ 8]  672 	inc	hl
      0002DA 22               [ 8]  673 	ld	(hl+), a
      0002DB 73               [ 8]  674 	ld	(hl), e
      0002DC F8 02            [12]  675 	ldhl	sp,#2
      0002DE 2A               [ 8]  676 	ld	a, (hl+)
      0002DF 5F               [ 4]  677 	ld	e, a
      0002E0 56               [ 8]  678 	ld	d, (hl)
      0002E1 F8 06            [12]  679 	ldhl	sp,	#6
      0002E3 2A               [ 8]  680 	ld	a, (hl+)
      0002E4 12               [ 8]  681 	ld	(de), a
      0002E5 13               [ 8]  682 	inc	de
      0002E6 7E               [ 8]  683 	ld	a, (hl)
      0002E7 12               [ 8]  684 	ld	(de), a
                                    685 ;C:/gbdk/ZGB/common/src/SpriteManager.c:118: cachedSprite = THIS;
      0002E8 FAr1Br00         [16]  686 	ld	a, (#_THIS)
      0002EB EArF9r02         [16]  687 	ld	(#_cachedSprite),a
      0002EE FAr1Cr00         [16]  688 	ld	a, (#_THIS + 1)
      0002F1 EArFAr02         [16]  689 	ld	(#_cachedSprite + 1),a
                                    690 ;C:/gbdk/ZGB/common/src/SpriteManager.c:119: spriteIdxTmp = THIS_IDX;
      0002F4 FAr1Ar00         [16]  691 	ld	a, (#_THIS_IDX)
      0002F7 F8 07            [12]  692 	ldhl	sp,	#7
      0002F9 77               [ 8]  693 	ld	(hl), a
                                    694 ;C:/gbdk/ZGB/common/src/SpriteManager.c:120: THIS = sprite;
      0002FA 21r1Br00         [12]  695 	ld	hl, #_THIS
      0002FD 79               [ 4]  696 	ld	a, c
      0002FE 22               [ 8]  697 	ld	(hl+), a
      0002FF 70               [ 8]  698 	ld	(hl), b
                                    699 ;C:/gbdk/ZGB/common/src/SpriteManager.c:121: THIS_IDX = sprite_manager_updatables[0] - 1;
      000300 FAr02r00         [16]  700 	ld	a, (#_sprite_manager_updatables + 0)
      000303 3D               [ 4]  701 	dec	a
      000304 EAr1Ar00         [16]  702 	ld	(#_THIS_IDX),a
                                    703 ;C:/gbdk/ZGB/common/src/SpriteManager.c:122: PUSH_BANK(spriteBanks[sprite->type]);
      000307 D1               [12]  704 	pop	de
      000308 D5               [16]  705 	push	de
      000309 1A               [ 8]  706 	ld	a, (de)
      00030A C6r00            [ 8]  707 	add	a, #<(_spriteBanks)
      00030C 5F               [ 4]  708 	ld	e, a
      00030D 3E 00            [ 8]  709 	ld	a, #0x00
      00030F CEs00            [ 8]  710 	adc	a, #>(_spriteBanks)
      000311 57               [ 4]  711 	ld	d, a
      000312 1A               [ 8]  712 	ld	a, (de)
      000313 C5               [16]  713 	push	bc
      000314 F5               [16]  714 	push	af
      000315 33               [ 8]  715 	inc	sp
      000316 CDr00r00         [24]  716 	call	_PushBank
      000319 33               [ 8]  717 	inc	sp
      00031A C1               [12]  718 	pop	bc
                                    719 ;C:/gbdk/ZGB/common/src/SpriteManager.c:123: spriteStartFuncs[sprite->type]();
      00031B D1               [12]  720 	pop	de
      00031C D5               [16]  721 	push	de
      00031D 1A               [ 8]  722 	ld	a, (de)
      00031E 26 00            [ 8]  723 	ld	h, #0x00
                                    724 ;	spillPairReg hl
                                    725 ;	spillPairReg hl
      000320 6F               [ 4]  726 	ld	l, a
      000321 29               [ 8]  727 	add	hl, hl
      000322 11r00r00         [12]  728 	ld	de, #_spriteStartFuncs
      000325 19               [ 8]  729 	add	hl, de
      000326 2A               [ 8]  730 	ld	a,	(hl+)
      000327 66               [ 8]  731 	ld	h, (hl)
                                    732 ;	spillPairReg hl
      000328 6F               [ 4]  733 	ld	l, a
                                    734 ;	spillPairReg hl
                                    735 ;	spillPairReg hl
      000329 C5               [16]  736 	push	bc
      00032A CDr00r00         [24]  737 	call	___sdcc_call_hl
      00032D CDr00r00         [24]  738 	call	_PopBank
      000330 C1               [12]  739 	pop	bc
                                    740 ;C:/gbdk/ZGB/common/src/SpriteManager.c:126: THIS = cachedSprite;
      000331 FArF9r02         [16]  741 	ld	a, (#_cachedSprite)
      000334 EAr1Br00         [16]  742 	ld	(#_THIS),a
      000337 FArFAr02         [16]  743 	ld	a, (#_cachedSprite + 1)
      00033A EAr1Cr00         [16]  744 	ld	(#_THIS + 1),a
                                    745 ;C:/gbdk/ZGB/common/src/SpriteManager.c:127: THIS_IDX = spriteIdxTmp;
      00033D F8 07            [12]  746 	ldhl	sp,	#7
      00033F 7E               [ 8]  747 	ld	a, (hl)
      000340 EAr1Ar00         [16]  748 	ld	(#_THIS_IDX),a
                                    749 ;C:/gbdk/ZGB/common/src/SpriteManager.c:128: return sprite;
                                    750 ;C:/gbdk/ZGB/common/src/SpriteManager.c:129: }
      000343 E8 0B            [16]  751 	add	sp, #11
      000345 E1               [12]  752 	pop	hl
      000346 F1               [12]  753 	pop	af
      000347 E9               [ 4]  754 	jp	(hl)
                                    755 ;C:/gbdk/ZGB/common/src/SpriteManager.c:131: void SpriteManagerRemove(int idx) {
                                    756 ;	---------------------------------
                                    757 ; Function SpriteManagerRemove
                                    758 ; ---------------------------------
      000348                        759 _SpriteManagerRemove::
                                    760 ;C:/gbdk/ZGB/common/src/SpriteManager.c:132: sprite_manager_removal_check = 1;
      000348 21rF8r02         [12]  761 	ld	hl, #_sprite_manager_removal_check
      00034B 36 01            [12]  762 	ld	(hl), #0x01
                                    763 ;C:/gbdk/ZGB/common/src/SpriteManager.c:133: sprite_manager_sprites[sprite_manager_updatables[idx + 1]]->marked_for_removal = 1;
      00034D 01rBCr02         [12]  764 	ld	bc, #_sprite_manager_sprites+0
      000350 1C               [ 4]  765 	inc	e
      000351 7B               [ 4]  766 	ld	a, e
      000352 07               [ 4]  767 	rlca
      000353 9F               [ 4]  768 	sbc	a, a
      000354 57               [ 4]  769 	ld	d, a
      000355 21r02r00         [12]  770 	ld	hl, #_sprite_manager_updatables
      000358 19               [ 8]  771 	add	hl, de
      000359 6E               [ 8]  772 	ld	l, (hl)
                                    773 ;	spillPairReg hl
      00035A 26 00            [ 8]  774 	ld	h, #0x00
                                    775 ;	spillPairReg hl
                                    776 ;	spillPairReg hl
      00035C 29               [ 8]  777 	add	hl, hl
      00035D 09               [ 8]  778 	add	hl, bc
      00035E 2A               [ 8]  779 	ld	a, (hl+)
      00035F 4F               [ 4]  780 	ld	c, a
      000360 46               [ 8]  781 	ld	b, (hl)
      000361 21 14 00         [12]  782 	ld	hl, #0x0014
      000364 09               [ 8]  783 	add	hl, bc
      000365 36 01            [12]  784 	ld	(hl), #0x01
                                    785 ;C:/gbdk/ZGB/common/src/SpriteManager.c:134: }
      000367 C9               [16]  786 	ret
                                    787 ;C:/gbdk/ZGB/common/src/SpriteManager.c:136: void SpriteManagerRemoveSprite(Sprite* sprite) {
                                    788 ;	---------------------------------
                                    789 ; Function SpriteManagerRemoveSprite
                                    790 ; ---------------------------------
      000368                        791 _SpriteManagerRemoveSprite::
      000368 E8 FC            [16]  792 	add	sp, #-4
      00036A F8 02            [12]  793 	ldhl	sp,	#2
      00036C 7B               [ 4]  794 	ld	a, e
      00036D 22               [ 8]  795 	ld	(hl+), a
      00036E 72               [ 8]  796 	ld	(hl), d
                                    797 ;C:/gbdk/ZGB/common/src/SpriteManager.c:139: for(i = 0u; i != sprite_manager_updatables[0]; ++i) {
      00036F 01 00 00         [12]  798 	ld	bc, #0x0
      000372                        799 00105$:
      000372 21r02r00         [12]  800 	ld	hl, #_sprite_manager_updatables
      000375 6E               [ 8]  801 	ld	l, (hl)
                                    802 ;	spillPairReg hl
                                    803 ;C:/gbdk/ZGB/common/src/SpriteManager.c:140: s = sprite_manager_sprites[sprite_manager_updatables[i + 1]];
      000376 78               [ 4]  804 	ld	a,b
      000377 BD               [ 4]  805 	cp	a,l
      000378 28 33            [12]  806 	jr	Z, 00107$
      00037A 3C               [ 4]  807 	inc	a
      00037B 5F               [ 4]  808 	ld	e, a
      00037C 07               [ 4]  809 	rlca
      00037D 9F               [ 4]  810 	sbc	a, a
      00037E 57               [ 4]  811 	ld	d, a
      00037F 21r02r00         [12]  812 	ld	hl, #_sprite_manager_updatables
      000382 19               [ 8]  813 	add	hl, de
      000383 6E               [ 8]  814 	ld	l, (hl)
                                    815 ;	spillPairReg hl
      000384 26 00            [ 8]  816 	ld	h, #0x00
                                    817 ;	spillPairReg hl
                                    818 ;	spillPairReg hl
      000386 29               [ 8]  819 	add	hl, hl
      000387 11rBCr02         [12]  820 	ld	de, #_sprite_manager_sprites
      00038A 19               [ 8]  821 	add	hl, de
      00038B 5D               [ 4]  822 	ld	e, l
      00038C 54               [ 4]  823 	ld	d, h
      00038D 1A               [ 8]  824 	ld	a, (de)
      00038E F8 00            [12]  825 	ldhl	sp,	#0
      000390 22               [ 8]  826 	ld	(hl+), a
      000391 13               [ 8]  827 	inc	de
      000392 1A               [ 8]  828 	ld	a, (de)
      000393 77               [ 8]  829 	ld	(hl), a
                                    830 ;C:/gbdk/ZGB/common/src/SpriteManager.c:141: if(s == sprite) {
      000394 F8 02            [12]  831 	ldhl	sp,	#2
      000396 3A               [ 8]  832 	ld	a, (hl-)
      000397 2B               [ 8]  833 	dec	hl
      000398 96               [ 8]  834 	sub	a, (hl)
      000399 20 0E            [12]  835 	jr	NZ, 00106$
      00039B F8 03            [12]  836 	ldhl	sp,	#3
      00039D 3A               [ 8]  837 	ld	a, (hl-)
      00039E 2B               [ 8]  838 	dec	hl
                                    839 ;C:/gbdk/ZGB/common/src/SpriteManager.c:142: SpriteManagerRemove(i);
      00039F 96               [ 8]  840 	sub	a,(hl)
      0003A0 20 07            [12]  841 	jr	NZ, 00106$
      0003A2 57               [ 4]  842 	ld	d,a
      0003A3 59               [ 4]  843 	ld	e, c
      0003A4 CDr48r03         [24]  844 	call	_SpriteManagerRemove
                                    845 ;C:/gbdk/ZGB/common/src/SpriteManager.c:143: break;
      0003A7 18 04            [12]  846 	jr	00107$
      0003A9                        847 00106$:
                                    848 ;C:/gbdk/ZGB/common/src/SpriteManager.c:139: for(i = 0u; i != sprite_manager_updatables[0]; ++i) {
      0003A9 04               [ 4]  849 	inc	b
      0003AA 48               [ 4]  850 	ld	c, b
      0003AB 18 C5            [12]  851 	jr	00105$
      0003AD                        852 00107$:
                                    853 ;C:/gbdk/ZGB/common/src/SpriteManager.c:146: }
      0003AD E8 04            [16]  854 	add	sp, #4
      0003AF C9               [16]  855 	ret
                                    856 ;C:/gbdk/ZGB/common/src/SpriteManager.c:148: void SpriteManagerFlushRemove() {
                                    857 ;	---------------------------------
                                    858 ; Function SpriteManagerFlushRemove
                                    859 ; ---------------------------------
      0003B0                        860 _SpriteManagerFlushRemove::
      0003B0 3B               [ 8]  861 	dec	sp
      0003B1 3B               [ 8]  862 	dec	sp
                                    863 ;C:/gbdk/ZGB/common/src/SpriteManager.c:150: for(THIS_IDX = sprite_manager_updatables[0] - 1u; (UINT8)(THIS_IDX + 1u) != 0u; THIS_IDX --) {
      0003B2 FAr02r00         [16]  864 	ld	a, (#_sprite_manager_updatables + 0)
      0003B5 3D               [ 4]  865 	dec	a
      0003B6 EAr1Ar00         [16]  866 	ld	(#_THIS_IDX),a
      0003B9                        867 00105$:
      0003B9 21r1Ar00         [12]  868 	ld	hl, #_THIS_IDX
      0003BC 4E               [ 8]  869 	ld	c, (hl)
      0003BD 0C               [ 4]  870 	inc	c
      0003BE 79               [ 4]  871 	ld	a, c
      0003BF CAr44r04         [16]  872 	jp	Z, 00103$
                                    873 ;C:/gbdk/ZGB/common/src/SpriteManager.c:151: THIS = sprite_manager_sprites[sprite_manager_updatables[THIS_IDX + 1u]];
      0003C2 59               [ 4]  874 	ld	e, c
      0003C3 16 00            [ 8]  875 	ld	d, #0x00
      0003C5 21r02r00         [12]  876 	ld	hl, #_sprite_manager_updatables
      0003C8 19               [ 8]  877 	add	hl, de
      0003C9 33               [ 8]  878 	inc	sp
      0003CA 33               [ 8]  879 	inc	sp
      0003CB 5D               [ 4]  880 	ld	e, l
      0003CC 54               [ 4]  881 	ld	d, h
      0003CD D5               [16]  882 	push	de
      0003CE 1A               [ 8]  883 	ld	a, (de)
      0003CF 26 00            [ 8]  884 	ld	h, #0x00
                                    885 ;	spillPairReg hl
                                    886 ;	spillPairReg hl
      0003D1 6F               [ 4]  887 	ld	l, a
      0003D2 29               [ 8]  888 	add	hl, hl
      0003D3 11rBCr02         [12]  889 	ld	de, #_sprite_manager_sprites
      0003D6 19               [ 8]  890 	add	hl, de
      0003D7 5D               [ 4]  891 	ld	e, l
      0003D8 54               [ 4]  892 	ld	d, h
      0003D9 1A               [ 8]  893 	ld	a, (de)
      0003DA 21r1Br00         [12]  894 	ld	hl, #_THIS
      0003DD 22               [ 8]  895 	ld	(hl+), a
      0003DE 13               [ 8]  896 	inc	de
      0003DF 1A               [ 8]  897 	ld	a, (de)
      0003E0 77               [ 8]  898 	ld	(hl), a
                                    899 ;C:/gbdk/ZGB/common/src/SpriteManager.c:152: if(THIS->marked_for_removal) {
      0003E1 21r1Br00         [12]  900 	ld	hl, #_THIS
      0003E4 2A               [ 8]  901 	ld	a, (hl+)
      0003E5 4F               [ 4]  902 	ld	c, a
      0003E6 46               [ 8]  903 	ld	b, (hl)
      0003E7 21 14 00         [12]  904 	ld	hl, #0x0014
      0003EA 09               [ 8]  905 	add	hl, bc
      0003EB 7E               [ 8]  906 	ld	a, (hl)
      0003EC B7               [ 4]  907 	or	a, a
      0003ED 28 4E            [12]  908 	jr	Z, 00106$
                                    909 ;C:/gbdk/ZGB/common/src/SpriteManager.c:153: StackPush(sprite_manager_sprites_pool, sprite_manager_updatables[THIS_IDX + 1u]);
      0003EF 21r00r00         [12]  910 	ld	hl, #_sprite_manager_sprites_pool
      0003F2 34               [12]  911 	inc	(hl)
      0003F3 20 02            [12]  912 	jr	NZ, 00130$
      0003F5 23               [ 8]  913 	inc	hl
      0003F6 34               [12]  914 	inc	(hl)
      0003F7                        915 00130$:
      0003F7 21r00r00         [12]  916 	ld	hl, #_sprite_manager_sprites_pool
      0003FA 2A               [ 8]  917 	ld	a, (hl+)
      0003FB 4F               [ 4]  918 	ld	c, a
      0003FC 46               [ 8]  919 	ld	b, (hl)
      0003FD D1               [12]  920 	pop	de
      0003FE D5               [16]  921 	push	de
      0003FF 1A               [ 8]  922 	ld	a, (de)
      000400 02               [ 8]  923 	ld	(bc), a
                                    924 ;C:/gbdk/ZGB/common/src/SpriteManager.c:154: VectorRemovePos(sprite_manager_updatables, THIS_IDX);
      000401 FAr1Ar00         [16]  925 	ld	a, (#_THIS_IDX)
      000404 11r02r00         [12]  926 	ld	de, #_sprite_manager_updatables
      000407 CDr00r00         [24]  927 	call	_VectorRemovePos
                                    928 ;C:/gbdk/ZGB/common/src/SpriteManager.c:156: PUSH_BANK(spriteBanks[THIS->type]);
      00040A 21r1Br00         [12]  929 	ld	hl, #_THIS
      00040D 2A               [ 8]  930 	ld	a, (hl+)
      00040E 4F               [ 4]  931 	ld	c, a
      00040F 46               [ 8]  932 	ld	b, (hl)
      000410 21 13 00         [12]  933 	ld	hl, #0x0013
      000413 09               [ 8]  934 	add	hl, bc
      000414 4E               [ 8]  935 	ld	c, (hl)
      000415 21r00r00         [12]  936 	ld	hl, #_spriteBanks
      000418 06 00            [ 8]  937 	ld	b, #0x00
      00041A 09               [ 8]  938 	add	hl, bc
      00041B 7E               [ 8]  939 	ld	a, (hl)
      00041C F5               [16]  940 	push	af
      00041D 33               [ 8]  941 	inc	sp
      00041E CDr00r00         [24]  942 	call	_PushBank
      000421 33               [ 8]  943 	inc	sp
                                    944 ;C:/gbdk/ZGB/common/src/SpriteManager.c:157: spriteDestroyFuncs[THIS->type]();
      000422 21r1Br00         [12]  945 	ld	hl, #_THIS
      000425 2A               [ 8]  946 	ld	a, (hl+)
      000426 4F               [ 4]  947 	ld	c, a
      000427 46               [ 8]  948 	ld	b, (hl)
      000428 21 13 00         [12]  949 	ld	hl, #0x0013
      00042B 09               [ 8]  950 	add	hl, bc
      00042C 6E               [ 8]  951 	ld	l, (hl)
                                    952 ;	spillPairReg hl
      00042D 26 00            [ 8]  953 	ld	h, #0x00
                                    954 ;	spillPairReg hl
                                    955 ;	spillPairReg hl
      00042F 29               [ 8]  956 	add	hl, hl
      000430 11r00r00         [12]  957 	ld	de, #_spriteDestroyFuncs
      000433 19               [ 8]  958 	add	hl, de
      000434 2A               [ 8]  959 	ld	a,	(hl+)
      000435 66               [ 8]  960 	ld	h, (hl)
                                    961 ;	spillPairReg hl
      000436 6F               [ 4]  962 	ld	l, a
                                    963 ;	spillPairReg hl
                                    964 ;	spillPairReg hl
      000437 CDr00r00         [24]  965 	call	___sdcc_call_hl
                                    966 ;C:/gbdk/ZGB/common/src/SpriteManager.c:158: POP_BANK;
      00043A CDr00r00         [24]  967 	call	_PopBank
      00043D                        968 00106$:
                                    969 ;C:/gbdk/ZGB/common/src/SpriteManager.c:150: for(THIS_IDX = sprite_manager_updatables[0] - 1u; (UINT8)(THIS_IDX + 1u) != 0u; THIS_IDX --) {
      00043D 21r1Ar00         [12]  970 	ld	hl, #_THIS_IDX
      000440 35               [12]  971 	dec	(hl)
      000441 C3rB9r03         [16]  972 	jp	00105$
      000444                        973 00103$:
                                    974 ;C:/gbdk/ZGB/common/src/SpriteManager.c:161: sprite_manager_removal_check = 0;
      000444 21rF8r02         [12]  975 	ld	hl, #_sprite_manager_removal_check
      000447 36 00            [12]  976 	ld	(hl), #0x00
                                    977 ;C:/gbdk/ZGB/common/src/SpriteManager.c:162: }
      000449 33               [ 8]  978 	inc	sp
      00044A 33               [ 8]  979 	inc	sp
      00044B C9               [16]  980 	ret
                                    981 ;C:/gbdk/ZGB/common/src/SpriteManager.c:164: void SetBank(UINT8 bank) OLDCALL
                                    982 ;	---------------------------------
                                    983 ; Function SetBank
                                    984 ; ---------------------------------
      00044C                        985 _SetBank::
                                    986 ;C:/gbdk/ZGB/common/src/SpriteManager.c:174: __endasm;
      00044C F8 02            [12]  987 	ldhl	sp, #2
      00044E 7E               [ 8]  988 	ld	a, (hl)
      00044F EAr00r00         [16]  989 	ld	(#__current_bank), a
      000452 EA 00 20         [16]  990 	ld	(#0x2000), a
                                    991 ;C:/gbdk/ZGB/common/src/SpriteManager.c:175: }
      000455 C9               [16]  992 	ret
                                    993 ;C:/gbdk/ZGB/common/src/SpriteManager.c:182: void SpriteManagerUpdate() {
                                    994 ;	---------------------------------
                                    995 ; Function SpriteManagerUpdate
                                    996 ; ---------------------------------
      000456                        997 _SpriteManagerUpdate::
      000456 3B               [ 8]  998 	dec	sp
      000457 3B               [ 8]  999 	dec	sp
                                   1000 ;C:/gbdk/ZGB/common/src/SpriteManager.c:183: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
      000458 21r1Ar00         [12] 1001 	ld	hl, #_THIS_IDX
      00045B 36 00            [12] 1002 	ld	(hl), #0x00
      00045D FAr03r00         [16] 1003 	ld	a, (#(_sprite_manager_updatables + 1) + 0)
      000460 6F               [ 4] 1004 	ld	l, a
                                   1005 ;	spillPairReg hl
                                   1006 ;	spillPairReg hl
      000461 26 00            [ 8] 1007 	ld	h, #0x00
                                   1008 ;	spillPairReg hl
                                   1009 ;	spillPairReg hl
      000463 29               [ 8] 1010 	add	hl, hl
      000464 11rBCr02         [12] 1011 	ld	de, #_sprite_manager_sprites
      000467 19               [ 8] 1012 	add	hl, de
      000468 5D               [ 4] 1013 	ld	e, l
      000469 54               [ 4] 1014 	ld	d, h
      00046A 1A               [ 8] 1015 	ld	a, (de)
      00046B 21r1Br00         [12] 1016 	ld	hl, #_THIS
      00046E 22               [ 8] 1017 	ld	(hl+), a
      00046F 13               [ 8] 1018 	inc	de
      000470 1A               [ 8] 1019 	ld	a, (de)
      000471 77               [ 8] 1020 	ld	(hl), a
      000472                       1021 00109$:
      000472 21r02r00         [12] 1022 	ld	hl, #_sprite_manager_updatables
      000475 4E               [ 8] 1023 	ld	c, (hl)
      000476 FAr1Ar00         [16] 1024 	ld	a, (#_THIS_IDX)
      000479 91               [ 4] 1025 	sub	a, c
      00047A CArFEr04         [16] 1026 	jp	Z,00105$
                                   1027 ;C:/gbdk/ZGB/common/src/SpriteManager.c:184: if(!THIS->marked_for_removal) {
      00047D FAr1Br00         [16] 1028 	ld	a, (#_THIS)
      000480 F8 00            [12] 1029 	ldhl	sp,	#0
      000482 77               [ 8] 1030 	ld	(hl), a
      000483 FAr1Cr00         [16] 1031 	ld	a, (#_THIS + 1)
      000486 F8 01            [12] 1032 	ldhl	sp,	#1
      000488 77               [ 8] 1033 	ld	(hl), a
      000489 D1               [12] 1034 	pop	de
      00048A D5               [16] 1035 	push	de
      00048B 21 14 00         [12] 1036 	ld	hl, #0x0014
      00048E 19               [ 8] 1037 	add	hl, de
      00048F 4D               [ 4] 1038 	ld	c, l
      000490 44               [ 4] 1039 	ld	b, h
      000491 0A               [ 8] 1040 	ld	a, (bc)
      000492 B7               [ 4] 1041 	or	a, a
      000493 20 48            [12] 1042 	jr	NZ, 00110$
                                   1043 ;C:/gbdk/ZGB/common/src/SpriteManager.c:186: SetBank(spriteBanks[THIS->type]);
      000495 D1               [12] 1044 	pop	de
      000496 D5               [16] 1045 	push	de
      000497 21 13 00         [12] 1046 	ld	hl, #0x0013
      00049A 19               [ 8] 1047 	add	hl, de
      00049B 4D               [ 4] 1048 	ld	c, l
      00049C 44               [ 4] 1049 	ld	b, h
      00049D 0A               [ 8] 1050 	ld	a, (bc)
      00049E 4F               [ 4] 1051 	ld	c, a
      00049F 21r00r00         [12] 1052 	ld	hl, #_spriteBanks
      0004A2 06 00            [ 8] 1053 	ld	b, #0x00
      0004A4 09               [ 8] 1054 	add	hl, bc
      0004A5 7E               [ 8] 1055 	ld	a, (hl)
      0004A6 F5               [16] 1056 	push	af
      0004A7 33               [ 8] 1057 	inc	sp
      0004A8 CDr4Cr04         [24] 1058 	call	_SetBank
      0004AB 33               [ 8] 1059 	inc	sp
                                   1060 ;C:/gbdk/ZGB/common/src/SpriteManager.c:188: spriteUpdateFuncs[THIS->type]();
      0004AC 21r1Br00         [12] 1061 	ld	hl, #_THIS
      0004AF 2A               [ 8] 1062 	ld	a, (hl+)
      0004B0 4F               [ 4] 1063 	ld	c, a
      0004B1 46               [ 8] 1064 	ld	b, (hl)
      0004B2 21 13 00         [12] 1065 	ld	hl, #0x0013
      0004B5 09               [ 8] 1066 	add	hl, bc
      0004B6 6E               [ 8] 1067 	ld	l, (hl)
                                   1068 ;	spillPairReg hl
      0004B7 26 00            [ 8] 1069 	ld	h, #0x00
                                   1070 ;	spillPairReg hl
                                   1071 ;	spillPairReg hl
      0004B9 29               [ 8] 1072 	add	hl, hl
      0004BA 11r00r00         [12] 1073 	ld	de, #_spriteUpdateFuncs
      0004BD 19               [ 8] 1074 	add	hl, de
      0004BE 2A               [ 8] 1075 	ld	a, (hl+)
      0004BF 4F               [ 4] 1076 	ld	c, a
      0004C0 66               [ 8] 1077 	ld	h, (hl)
                                   1078 ;	spillPairReg hl
      0004C1 69               [ 4] 1079 	ld	l, c
                                   1080 ;	spillPairReg hl
                                   1081 ;	spillPairReg hl
      0004C2 CDr00r00         [24] 1082 	call	___sdcc_call_hl
                                   1083 ;C:/gbdk/ZGB/common/src/SpriteManager.c:190: if(THIS == scroll_target)
      0004C5 FAr1Br00         [16] 1084 	ld	a, (#_THIS)
      0004C8 21r00r00         [12] 1085 	ld	hl, #_scroll_target
      0004CB 96               [ 8] 1086 	sub	a, (hl)
      0004CC 20 0C            [12] 1087 	jr	NZ, 00102$
      0004CE FAr1Cr00         [16] 1088 	ld	a, (#_THIS + 1)
      0004D1 21r01r00         [12] 1089 	ld	hl, #_scroll_target + 1
      0004D4 96               [ 8] 1090 	sub	a, (hl)
      0004D5 20 03            [12] 1091 	jr	NZ, 00102$
                                   1092 ;C:/gbdk/ZGB/common/src/SpriteManager.c:191: RefreshScroll();
      0004D7 CDr00r00         [24] 1093 	call	_RefreshScroll
      0004DA                       1094 00102$:
                                   1095 ;C:/gbdk/ZGB/common/src/SpriteManager.c:193: DrawSprite(); //this needs to be done using the sprite bank because the animation array is stored there
      0004DA CDr00r00         [24] 1096 	call	_DrawSprite
      0004DD                       1097 00110$:
                                   1098 ;C:/gbdk/ZGB/common/src/SpriteManager.c:183: SPRITEMANAGER_ITERATE(THIS_IDX, THIS) {
      0004DD 21r1Ar00         [12] 1099 	ld	hl, #_THIS_IDX
      0004E0 34               [12] 1100 	inc	(hl)
      0004E1 4E               [ 8] 1101 	ld	c, (hl)
      0004E2 0C               [ 4] 1102 	inc	c
      0004E3 21r02r00         [12] 1103 	ld	hl, #_sprite_manager_updatables
      0004E6 06 00            [ 8] 1104 	ld	b, #0x00
      0004E8 09               [ 8] 1105 	add	hl, bc
      0004E9 6E               [ 8] 1106 	ld	l, (hl)
                                   1107 ;	spillPairReg hl
      0004EA 26 00            [ 8] 1108 	ld	h, #0x00
                                   1109 ;	spillPairReg hl
                                   1110 ;	spillPairReg hl
      0004EC 29               [ 8] 1111 	add	hl, hl
      0004ED 11rBCr02         [12] 1112 	ld	de, #_sprite_manager_sprites
      0004F0 19               [ 8] 1113 	add	hl, de
      0004F1 5D               [ 4] 1114 	ld	e, l
      0004F2 54               [ 4] 1115 	ld	d, h
      0004F3 1A               [ 8] 1116 	ld	a, (de)
      0004F4 21r1Br00         [12] 1117 	ld	hl, #_THIS
      0004F7 22               [ 8] 1118 	ld	(hl+), a
      0004F8 13               [ 8] 1119 	inc	de
      0004F9 1A               [ 8] 1120 	ld	a, (de)
      0004FA 77               [ 8] 1121 	ld	(hl), a
      0004FB C3r72r04         [16] 1122 	jp	00109$
      0004FE                       1123 00105$:
                                   1124 ;C:/gbdk/ZGB/common/src/SpriteManager.c:197: SwapOAMs();
      0004FE CDr00r00         [24] 1125 	call	_SwapOAMs
                                   1126 ;C:/gbdk/ZGB/common/src/SpriteManager.c:199: if(sprite_manager_removal_check) {
      000501 21rF8r02         [12] 1127 	ld	hl, #_sprite_manager_removal_check
      000504 7E               [ 8] 1128 	ld	a, (hl)
      000505 B7               [ 4] 1129 	or	a, a
      000506 28 05            [12] 1130 	jr	Z, 00111$
                                   1131 ;C:/gbdk/ZGB/common/src/SpriteManager.c:200: SpriteManagerFlushRemove();
      000508 33               [ 8] 1132 	inc	sp
      000509 33               [ 8] 1133 	inc	sp
      00050A C3rB0r03         [16] 1134 	jp	_SpriteManagerFlushRemove
      00050D                       1135 00111$:
                                   1136 ;C:/gbdk/ZGB/common/src/SpriteManager.c:202: }
      00050D 33               [ 8] 1137 	inc	sp
      00050E 33               [ 8] 1138 	inc	sp
      00050F C9               [16] 1139 	ret
                                   1140 	.area _CODE
                                   1141 	.area _INITIALIZER
      000000                       1142 __xinit__sprite_manager_sprites_pool:
      000000rE3r02                 1143 	.dw (_sprite_manager_sprites_poolSTACK - 1)
      000002                       1144 __xinit__sprite_manager_updatables:
      000002 00                    1145 	.db #0x00	; 0
      000003 00                    1146 	.db 0x00
      000004 00                    1147 	.db 0x00
      000005 00                    1148 	.db 0x00
      000006 00                    1149 	.db 0x00
      000007 00                    1150 	.db 0x00
      000008 00                    1151 	.db 0x00
      000009 00                    1152 	.db 0x00
      00000A 00                    1153 	.db 0x00
      00000B 00                    1154 	.db 0x00
      00000C 00                    1155 	.db 0x00
      00000D 00                    1156 	.db 0x00
      00000E 00                    1157 	.db 0x00
      00000F 00                    1158 	.db 0x00
      000010 00                    1159 	.db 0x00
      000011 00                    1160 	.db 0x00
      000012 00                    1161 	.db 0x00
      000013 00                    1162 	.db 0x00
      000014 00                    1163 	.db 0x00
      000015 00                    1164 	.db 0x00
      000016 00                    1165 	.db 0x00
      000017                       1166 __xinit__last_sprite_loaded:
      000017 00 00                 1167 	.dw #0x0000
      000019                       1168 __xinit__last_sprite_pal_loaded:
      000019 00                    1169 	.db #0x00	; 0
      00001A                       1170 __xinit__THIS_IDX:
      00001A 00                    1171 	.db #0x00	; 0
      00001B                       1172 __xinit__THIS:
      00001B 00 00                 1173 	.dw #0x0000
                                   1174 	.area _CABS (ABS)
